<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VolrexMail</title>

<style>
*{box-sizing:border-box;margin:0;padding:0}

body{
font-family:Arial, sans-serif;
color:white;
display:flex;
justify-content:center;
align-items:center;
min-height:100vh;
overflow:hidden;
}

/* VIDEO BACKGROUND */
.bg-video{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
object-fit:cover;
z-index:-2;
}

.overlay{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.75);
z-index:-1;
}

/* CONTAINER */
.container{
width:100%;
max-width:430px;
background:rgba(17,24,39,0.85);
backdrop-filter:blur(12px);
border-radius:25px;
padding:25px;
box-shadow:0 0 50px rgba(0,0,0,0.7);
}

.page{display:none}
.page.active{display:block}

/* HEADER */
.header{text-align:center;margin-bottom:25px;}

.logo{
width:90px;
height:90px;
border-radius:50%;
object-fit:cover;
margin:auto;
margin-bottom:15px;
box-shadow:0 0 30px rgba(37,99,235,0.7);
border:2px solid #2563eb;
}

.brand{
font-size:30px;
font-weight:bold;
letter-spacing:1px;
}

.subtitle{
font-size:13px;
opacity:0.7;
margin-top:5px;
}

/* LOGIN */
.login{text-align:center;margin-top:60px;}

.login button{
background:#2563eb;
border:none;
padding:14px 30px;
border-radius:30px;
color:white;
cursor:pointer;
transition:0.3s;
font-size:14px;
}

.login button:hover{background:#1d4ed8}

/* SECTION */
.section{
background:rgba(31,41,55,0.9);
padding:15px;
border-radius:15px;
margin-top:15px;
}

.label{
font-size:12px;
opacity:0.6;
margin-bottom:8px;
}

.email-box{
background:#0f172a;
padding:12px;
border-radius:12px;
font-size:13px;
word-break:break-all;
}

.timer{
margin-top:8px;
font-size:12px;
opacity:0.6;
}

.plus{
margin-top:15px;
background:#2563eb;
width:45px;
height:45px;
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
font-size:22px;
cursor:pointer;
margin-left:auto;
margin-right:auto;
transition:0.3s;
}

.plus:hover{background:#1d4ed8}

.mail{
padding:8px 0;
border-bottom:1px solid rgba(255,255,255,0.05);
font-size:13px;
}

.empty{
opacity:0.5;
text-align:center;
padding:15px;
}

.logout{
margin-top:15px;
text-align:center;
font-size:13px;
opacity:0.6;
cursor:pointer;
}

.logout:hover{opacity:1}
</style>
</head>

<body>

<!-- VIDEO -->
<video autoplay muted loop playsinline class="bg-video">
<source src="bg.mp4" type="video/mp4">
</video>
<div class="overlay"></div>

<div class="container">

<!-- LOGIN -->
<div id="loginPage" class="page active">
<div class="header">
<img src="logo.jpg" class="logo">
<div class="brand">VolrexMail</div>
<div class="subtitle">The TemMail master☠️☠️☠️</div>
</div>
<div class="login">
<button onclick="googleLogin()">LOGIN WITH GOOGLE</button>
</div>
</div>

<!-- DASHBOARD -->
<div id="dashboardPage" class="page">
<div class="header">
<img src="logo.jpg" class="logo">
<div class="brand">VolrexMail</div>
<div class="subtitle">The websed TemMail in Indonesia</div>
</div>

<div class="section">
<div class="label">EMAIL SAAT INI</div>
<div id="email" class="email-box">-</div>
<div id="timer" class="timer"></div>
<div class="plus" onclick="createAccount()">+</div>
</div>

<div class="section">
<div class="label">INBOX</div>
<div id="inbox">
<div class="empty">BELUM ADA EMAIL</div>
</div>
</div>

<div class="logout" onclick="logout()">LOGOUT</div>
</div>

</div>

<audio id="sound">
<source src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg">
</audio>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut }
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";

const firebaseConfig = {
apiKey: "AIzaSyCC977KP8i1VslX3YFLpCDGqBf8xTAfeiE",
authDomain: "vortexmail-7333a.firebaseapp.com",
projectId: "vortexmail-7333a",
storageBucket: "vortexmail-7333a.firebasestorage.app",
messagingSenderId: "265097344191",
appId: "1:265097344191:web:2789a277e09620a554420a"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

window.googleLogin=async()=>{await signInWithPopup(auth,provider);}
window.logout=()=>{signOut(auth);location.reload();}

onAuthStateChanged(auth,(user)=>{
if(user){
document.getElementById("loginPage").classList.remove("active");
document.getElementById("dashboardPage").classList.add("active");
createAccount();
}
});

let token="";
let createdTime=0;
let mailCount=0;

async function getDomain(){
const res=await fetch("https://api.mail.tm/domains");
const data=await res.json();
return data["hydra:member"][0].domain;
}

window.createAccount=async function(){
const domain=await getDomain();
const random=Math.random().toString(36).substring(2,10);
const address=random+"@"+domain;
const password="12345678";

await fetch("https://api.mail.tm/accounts",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({address,password})
});

const login=await fetch("https://api.mail.tm/token",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({address,password})
});

const data=await login.json();
token=data.token;
createdTime=Date.now();
mailCount=0;

document.getElementById("email").innerText=address;
document.getElementById("inbox").innerHTML='<div class="empty">MENUNGGU EMAIL...</div>';
};

function updateTimer(){
if(!createdTime)return;
let remaining=600000-(Date.now()-createdTime);
if(remaining<=0){createAccount();return;}
let m=Math.floor(remaining/60000);
let s=Math.floor((remaining%60000)/1000);
document.getElementById("timer").innerText=
"Auto refresh dalam "+m+"m "+s+"s";
}
setInterval(updateTimer,1000);

async function checkInbox(){
if(!token)return;
const res=await fetch("https://api.mail.tm/messages",{
headers:{Authorization:"Bearer "+token}
});
const data=await res.json();
const mails=data["hydra:member"];

if(mails.length>mailCount){
mailCount=mails.length;
document.getElementById("sound").play();
}

const inbox=document.getElementById("inbox");
if(mails.length===0){
inbox.innerHTML='<div class="empty">BELUM ADA EMAIL</div>';
return;
}

inbox.innerHTML="";
mails.forEach(mail=>{
inbox.innerHTML+=`
<div class="mail">
<b>${mail.from.address}</b><br>
${mail.subject}
</div>`;
});
}

setInterval(checkInbox,5000);
</script>

</body>
</html>